(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{1539:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return m}));var o=n(2),r=n(13),l=(n(22),n(43),n(44),n(11),n(122)),c=n(220),d=n(61),h=n(41);function f(t){var e=location.host.includes("stage");window.AppleID.auth.init({scope:"email",clientId:t?"kr.co.kream.dev":e?"kr.co.kream.stage":"kr.co.kream",redirectURI:t?"https://dev.kream.co.kr":e?"https://stage.kream.co.kr":"https://kream.co.kr"})}function v(){window.AF("pba","event",{eventType:"EVENT",eventName:c.a.LOGIN,eventValue:Object(r.a)({},c.b.SIGN_METHOD,"apple")})}function m(t,e,n){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(regeneratorRuntime.mark((function t(e,n,code){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ctx.app.$axios.post("/api/social/apple/login",{identity_token:n,code:code}).then((function(t){var o=t.data,r=o.email,l=o.user,c=o.login_success,d=o.social_auth_provider,h=o.social_auth_uid,f=o.access_token,m=o.refresh_token;if(e.$storage.setState("logged_email",r),e.$storage.setState("social_auth_uid",h),e.$storage.setState("social_auth_provider",d||"apple"),e.$storage.setUniversal("login_type","social"),c)if(null===l.phone)e.$storage.setState("invalidUser",!0);else{var w="local";e.setUser(l),e.setToken(w,f),e.setRefreshToken(w,m),e.$storage.setState("token",f),e.$storage.setUniversal("strategy",w),e.ctx.app.$config.isDevelopPhase||v()}else e.$storage.setState("token",n),e.$storage.setState("logged_status","join")})).catch((function(t){return Object(d.d)({content:l.b[t.response.data.code]||l.f,type:h.ToastType.error}),Promise.reject()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},1718:function(t,e,n){},2183:function(t,e,n){"use strict";n(1718)},2549:function(t,e,n){"use strict";n.r(e);var o=n(2),r=(n(22),n(11),n(39),n(99),n(26),n(51),n(857)),l=n(464),c=n(56),d=n(13),h=n(122),f=n(220),v=n(5),m=n(7),w=n(61),_=n(41);function $(t,e,n){e.$storage.setState("logged_email",t),e.$storage.setUniversal("login_type","email");var o=n.data.access_token,r=n.data.refresh_token;e.setToken("local",o),e.$storage.setState("token",o),e.setRefreshToken("local",r),e.setUser(n.data.user),e.ctx.app.$config.isDevelopPhase||(AF("pba","setCustomerUserId",n.data.user.extra.cuid),AF("pba","event",{eventType:"EVENT",eventName:f.a.LOGIN,eventValue:Object(d.a)({},f.b.SIGN_METHOD,"email")}))}function k(t,e,n){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(regeneratorRuntime.mark((function t(e,n,o){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post("/api/auth/login",{email:e,password:n}).catch((function(t){var e=t.response.data,code=e.code,n=e.message;Object(w.d)({content:code===v.b.SERVER_ERROR?n:h.b[code]||h.f,type:_.ToastType.error})}));case 2:return r=t.sent,t.abrupt("return",new Promise((function(t){void 0===r||200!==r.status&&201!==r.status||(null!=r.data.user.phone&&$(e,o,r),t(r))})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var E=n(1539),C=n(799),x={name:"LoginIndex",components:{BannerBottom:r.a},beforeRouteEnter:function(t,e,n){n((function(n){var o,r=null===(o=null==t?void 0:t.query)||void 0===o?void 0:o.returnUrl;n.referrer=r||(null==n?void 0:n.$getCertainLoginReferrer(document,null==e?void 0:e.fullPath))}))},layout:"search",middleware:l.validateUserNull,data:function(){return{referrer:"/",eyeOn:!1,eyeIcon:"ico-eye-off",inputType:"password",lookData:[{text:"이메일 가입",link:"/join"},{text:"이메일 찾기",link:"/login/find_email"},{text:"비밀번호 찾기",link:"/login/find_password"}],email:null,password:null,showErrorEmail:!1,showErrorPassword:!1,unwatch:[]}},head:function(){return{script:[{src:"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"}]}},computed:{validateForm:function(){return this.validEmail&&this.validPassword},validEmail:function(){return Object(c.d)(this.email)},validPassword:function(){return Object(c.e)(this.password)}},beforeDestroy:function(){this.unwatch.forEach((function(t){return t()}))},created:function(){this.reset()},mounted:function(){var t,e,n,o,r=this;if(null===(e=null===(t=this.$auth)||void 0===t?void 0:t.$storage)||void 0===e?void 0:e.getState("invalidUser")){var l=this.$auth.$storage.getState("token");this.startIdentification(l,(function(){r.$auth.loginWith("social_naver")}))}"join"===(null===(o=null===(n=this.$auth)||void 0===n?void 0:n.$storage)||void 0===o?void 0:o.getState("logged_status"))&&this.$router.push("/join"),this.watchLoginState("invalidUser",!0,(function(){setTimeout((function(){var t=r.$auth.$storage.getState("token");r.$auth.$storage.setState("invalidUser",!1),r.startIdentification(t,(function(){r.$auth.loginWith("social_naver")}))}),700)})),this.watchLoginState("logged_status","join",(function(){r.$router.push("/join")})),this.watchLoginState("loggedIn",!0,(function(){if(r.$isNotSupportedBrowser(r.$ua._parsed))window.location.href="/";else if(!r.$lodash.isEmpty(r.$auth.user)){if(r.$auth&&r.$auth.user&&r.$auth.user.password_change_required)return r.$auth.$storage.setLocalStorage("lastPath",r.referrer),void(window.location.href="/login/change_password");window.location.replace(r.referrer)}}))},methods:{watchLoginState:function(t,e,n){this.unwatch.push(this.$auth.$storage.watchState(t,(function(t){t===e&&n()})))},reset:function(){this.$auth.reset()},onClickApple:function(){Object(E.a)(this.$config.isDevelopPhase),window.AppleID.auth.signIn()},onClickNaver:function(){this.$loggedIn(this.$auth)||(this.$isMobile(this.$mq)?(this.$auth.$storage.setLocalStorage("lastPath",this.referrer),this.$router.replace("/login/naver")):this.$popupLoginNaver())},enterPassword:function(){this.validateForm&&this.onClickLogin()},check:function(t,e,n){var o=this;this.$auth.$storage.setState("invalidUser",!1),this.$lodash.isEmpty(t.data.check_url)||Object(C.m)(t.data.check_url).then((function(t){o.$checkIdentification(t,o.$router,o.$auth,(function(){o.$axios.create({headers:{Authorization:"Bearer ".concat(e)}}).post("/api/auth/identification/confirm",{id_key:t.data.id_key}).then((function(){n()}))}))}))},onClickLogin:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reset(),e.next=3,k(t.email,t.password,t.$auth);case 3:null==(n=e.sent).data.user.phone&&(o=n.data.access_token,t.startIdentification(o,(function(){k(t.email,t.password,t.$auth)})));case 5:case"end":return e.stop()}}),e)})))()},startIdentification:function(t,e){var n=this;Object(w.a)({content:h.c.EXISTS_IDENTIFICATION_NOTICE,handleConfirm:function(){null==n.$createPopup("/join/identification","popupIdentification")&&Object(w.d)({content:"팝업이 차단되었는지 확인해주세요.",type:_.ToastType.error}),n.$nuxt.$on("startIdentification",(function(o,r){var l=setInterval((function(){o.closed&&(clearInterval(l),n.check(r,t,e),n.$nuxt.$off("startIdentification"))}),100)}))},handleCancel:function(){n.$auth.reset()},cancelButtonEnabled:!0})}}},I=(n(2183),n(64)),component=Object(I.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container login"},[n("div",{class:["content",t.$mq]},[n("div",{staticClass:"login_area"},[t._m(0),n("InputBox",{staticClass:"has_button",attrs:{"input-type":"text",placeholder:"예) kream@kream.co.kr","has-error":t.showErrorEmail},on:{input:function(e){t.showErrorEmail=!t.validEmail}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},[n("h3",{staticClass:"input_title",attrs:{slot:"title"},slot:"title"},[t._v("이메일 주소")]),n("p",{staticClass:"input_error",attrs:{slot:"error"},slot:"error"},[t._v("이메일 주소를 정확히 입력해주세요.")]),n("BaseButton",{directives:[{name:"show",rawName:"v-show",value:!t.$lodash.isEmpty(t.email),expression:"!$lodash.isEmpty(email)"}],staticClass:"input_delete",attrs:{slot:"button"},on:{onClick:function(e){t.email=""}},slot:"button"},[n("svg-icon",{staticClass:"ico-delete-circle",attrs:{name:"ico-delete-circle"}})],1)],1),n("InputBox",{class:["has_button",{eye_on:t.eyeOn}],attrs:{"input-type":t.inputType,placeholder:"","has-error":t.showErrorPassword},on:{input:function(e){t.showErrorPassword=!t.validPassword},enter:t.enterPassword},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[n("h3",{staticClass:"input_title",attrs:{slot:"title"},slot:"title"},[t._v("비밀번호")]),n("p",{staticClass:"input_error",attrs:{slot:"error"},slot:"error"},[t._v(" 영문, 숫자, 특수문자를 조합해서 입력해주세요. (8-16자) ")])]),n("div",{staticClass:"login_btn_box"},[n("BaseButton",{attrs:{tag:"a",href:"#","style-type":"full solid",disabled:!t.validateForm},on:{onClick:t.onClickLogin}},[t._v(" 로그인 ")])],1),n("ul",{staticClass:"look_box"},t._l(t.lookData,(function(e,o){return n("li",{key:o,staticClass:"look_list"},[n("nuxt-link",{staticClass:"look_link",attrs:{to:e.link}},[t._v(" "+t._s(e.text)+" ")])],1)})),0),n("div",{staticClass:"social_login"},[n("BaseButton",{staticClass:"btn_login_naver",attrs:{type:"button","style-type":"full outline"},on:{onClick:t.onClickNaver}},[n("svg-icon",{staticClass:"logo-social",attrs:{name:"logo-naver"}}),t._v(" 네이버로 로그인 ")],1),n("BaseButton",{staticClass:"btn_login_apple",attrs:{type:"button","style-type":"full outline"},on:{onClick:t.onClickApple}},[n("svg-icon",{staticClass:"logo-social",attrs:{name:"logo-apple"}}),t._v(" Apple로 로그인 ")],1)],1)],1)]),n("BannerBottom")],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"login_title"},[n("span",{staticClass:"blind"},[t._v("KREAM")])])}],!1,null,"4ec1fe02",null);e.default=component.exports;installComponents(component,{BaseButton:n(461).default,InputBox:n(817).default})},801:function(t,e,n){(function(e){const o=n(805),path=n(463),r=n(808);function l(t){console.log(`[dotenv][DEBUG] ${t}`)}const c=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,d=/\\n/g,h=/\r\n|\n|\r/;function f(t,e){const n=Boolean(e&&e.debug),o={};return t.toString().split(h).forEach((function(line,t){const e=line.match(c);if(null!=e){const t=e[1];let n=e[2]||"";const r=n.length-1,l='"'===n[0]&&'"'===n[r];"'"===n[0]&&"'"===n[r]||l?(n=n.substring(1,r),l&&(n=n.replace(d,"\n"))):n=n.trim(),o[t]=n}else n&&l(`did not match key and value when parsing line ${t+1}: ${line}`)})),o}t.exports.config=function(t){let n=path.resolve(e.cwd(),".env"),c="utf8",d=!1;var h;t&&(null!=t.path&&(n="~"===(h=t.path)[0]?path.join(r.homedir(),h.slice(1)):h),null!=t.encoding&&(c=t.encoding),null!=t.debug&&(d=!0));try{const t=f(o.readFileSync(n,{encoding:c}),{debug:d});return Object.keys(t).forEach((function(n){Object.prototype.hasOwnProperty.call(e.env,n)?d&&l(`"${n}" is already defined in \`process.env\` and will not be overwritten`):e.env[n]=t[n]})),{parsed:t}}catch(t){return{error:t}}},t.exports.parse=f}).call(this,n(65))},805:function(t,e){},808:function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!=typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},822:function(t,e,n){},853:function(t,e,n){"use strict";n(822)},857:function(t,e,n){"use strict";n(26),n(51);var o=n(814),r=n(296),l={components:{LayerAppdown:o.a},data:function(){return{banners:[{subTitle:"service guide",Title:"KREAM은 처음이지? \n서비스 소개를 확인해보세요.",infoText:"서비스 안내",path:"/about",target:"_blank"},{subTitle:"download the app",Title:"KREAM 앱을 설치하여 \n한정판 스니커즈를 FLEX 하세요!",infoText:"앱 설치하기",path:"/download"}],showLayerAppdown:!1}},methods:{changeHtml:function(text){return text.replace(/(?:\r\n|\r|\n)/g,"<br />")},onClickBanner:function(path,t){if("/download"!==path)if(this.$lodash.isEmpty(t)||"_blank"!==t)this.$router.push(path);else{var e=this.$router.resolve({path:path});window.open(e.href,"_blank")}else this.$isMobile(this.$mq)?window.open(r.b.HOME,"_blank"):this.showLayerAppdown=!this.showLayerAppdown}}},c=(n(853),n(64)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["banner_bottom",t.$mq]},[t._l(t.banners,(function(e,o){return n("a",{key:o,staticClass:"banner_box",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.onClickBanner(e.path,e.target)}}},[n("div",{staticClass:"banner_info"},[n("strong",{staticClass:"info_subtitle"},[t._v(t._s(e.subTitle))]),n("p",{staticClass:"info_title",domProps:{innerHTML:t._s(t.changeHtml(e.Title))}}),n("span",{staticClass:"info_txt"},[t._v(t._s(e.infoText))])])])})),t.showLayerAppdown?n("LayerAppdown",{attrs:{type:"install","layer-open-appdown":t.showLayerAppdown},on:{closeLayerAppdown:function(e){t.showLayerAppdown=!1}}}):t._e()],2)}),[],!1,null,"11ddc032",null);e.a=component.exports}}]);